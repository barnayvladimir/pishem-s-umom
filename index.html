<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>‚ú® –ü–ò–®–ï–ú –° –£–ú–û–ú ‚Äî –®–ö–û–õ–ê ‚ú®</title>
  <style>
    :root{
      --accent:#6a5acd;
      --card:#fff;
      --bg1:#ffecd2;
      --bg2:#fcb69f;
      --green:#2ca58d;
    }
    body{
      margin:0;
      font-family: Inter, Arial, Helvetica, sans-serif;
      background: linear-gradient(135deg,var(--bg1),#ffd1dc, #c2e9fb);
      color:#222;
      -webkit-font-smoothing:antialiased;
    }
    .wrap{max-width:1100px;margin:20px auto;padding:24px;}
    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    h1{margin:0;font-size:34px;color:var(--accent)}
    p.lead{margin:6px 0 18px;color:#333}
    .task{background:var(--card);border-radius:16px;padding:18px;margin:16px 0;box-shadow:0 8px 30px rgba(0,0,0,0.08)}
    .task h2{margin:0 0 8px;font-size:20px}
    ol.steps{padding-left:18px;margin:8px 0 12px}
    .advice{background:#fff8dc;border-left:6px solid #ffd43b;padding:10px;border-radius:8px;font-size:14px;margin-top:12px}
    textarea, select, input[type="text"]{width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;font-size:15px;box-sizing:border-box}
    button.btn{background:var(--accent);color:#fff;border:none;padding:10px 14px;border-radius:10px;cursor:pointer;margin-top:10px}
    button.btn:hover{filter:brightness(0.95)}
    .output{margin-top:10px;padding:12px;background:#f7fbff;border-radius:8px;border:1px solid #e2f0ff;white-space:pre-wrap}
    .flex{display:flex;gap:12px;flex-wrap:wrap}
    .small{font-size:13px;color:#555}
    .error{color:#d32f2f;font-weight:700;text-decoration:underline}
    .label{font-weight:600;margin-top:8px;display:block}
    .row{display:flex;gap:12px;align-items:center}
    .chip{display:inline-block;padding:6px 10px;background:#fff;border-radius:999px;border:1px solid #eee;font-size:13px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>‚ú® –ü–ò–®–ï–ú –° –£–ú–û–ú ‚Äî –®–ö–û–õ–ê ‚ú®</h1>
    </header>
    <p class="lead">–ì–æ—Ç–æ–≤–æ –∫ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—é: –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –æ—Ñ–ª–∞–π–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ò—Å–ø–æ–ª—å–∑—É–π –∫–Ω–æ–ø–∫–∏ ‚Äî –ò–ò –æ—Ç–≤–µ—á–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ.</p>

    <!-- Task 1 -->
    <section class="task" id="task1">
      <h2>ü¶∏‚Äç‚ôÄÔ∏è –ó–∞–¥–∞–Ω–∏–µ 1 ‚Äî –°—É–ø–µ—Ä-—Ä–µ–¥–∞–∫—Ç–æ—Ä</h2>
      <ol class="steps">
        <li>–ù–∞–ø–∏—à–∏ —Ä–∞—Å—Å–∫–∞–∑ (10‚Äì15 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π).</li>
        <li>–ù–∞–∂–º–∏ ¬´–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ò–ò¬ª ‚Äî –ø–æ–ª—É—á–∏—à—å 5 –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω—ã—Ö —Å–æ–≤–µ—Ç–æ–≤.</li>
        <li>–í—ã–±–µ—Ä–∏, —á—Ç–æ –ø—Ä–∏–Ω—è—Ç—å –≤ —Å–≤–æ—ë–º —Ç–µ–∫—Å—Ç–µ.</li>
      </ol>
      <label class="label">–¢–≤–æ–π —Ä–∞—Å—Å–∫–∞–∑</label>
      <textarea id="t1_input" rows="6" placeholder="–ù–∞–ø–∏—à–∏ —Ä–∞—Å—Å–∫–∞–∑..."></textarea>
      <button class="btn" onclick="task1_check()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ò–ò</button>
      <div id="t1_out" class="output"></div>
      <div class="advice">üí° –°–æ–≤–µ—Ç: –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–π –≤—Å–µ –ø—Ä–∞–≤–∫–∏ ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–π —Å—Ç–∏–ª—å. –ó–∞–ø–æ–º–Ω–∏ 1-2 –ø—Ä–∏—ë–º–∞ –∏ –ø—Ä–∏–º–µ–Ω—è–π –∏—Ö –¥–∞–ª–µ–µ.</div>
    </section>

    <!-- Task 2 -->
    <section class="task" id="task2">
      <h2>üßô‚Äç‚ôÇÔ∏è –ó–∞–¥–∞–Ω–∏–µ 2 ‚Äî –ú–∞—Å—Ç–µ—Ä –∏—Å—Ç–æ—Ä–∏–π</h2>
      <ol class="steps">
        <li>–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ –º–µ—Å—Ç–∞ (–æ–Ω–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ).</li>
        <li>–í—ã–±–µ—Ä–∏ –∏ –ø—Ä–∏–¥—É–º–∞–π –ø—Ä–æ–±–ª–µ–º—É.</li>
        <li>–ù–∞–ø–∏—à–∏ —Å–≤–æ–π –∫–æ—Ä–æ—Ç–∫–∏–π —Ä–∞—Å—Å–∫–∞–∑ –∏ –ø–æ–∫–∞–∂–∏ –ø—É–±–ª–∏–∫–µ.</li>
      </ol>
      <div class="row">
        <button class="btn" onclick="task2_generate()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ –º–µ—Å—Ç–∞</button>
        <div class="small">–ù–∞–∂–∏–º–∞–π –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ ‚Äî –∫–∞–∂–¥—ã–π —Ä–∞–∑ –Ω–æ–≤—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã</div>
      </div>
      <label class="label">–ü–µ—Ä—Å–æ–Ω–∞–∂–∏</label>
      <div id="t2_chars" class="output small"></div>
      <label class="label">–ú–µ—Å—Ç–∞</label>
      <div id="t2_places" class="output small"></div>
      <label class="label">–¢–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è</label>
      <textarea id="t2_story" rows="5" placeholder="–ù–∞–ø–∏—à–∏ –∏—Å—Ç–æ—Ä–∏—é..."></textarea>
      <button class="btn" onclick="task2_save()">–ì–æ—Ç–æ–≤–æ ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
      <div id="t2_out" class="output"></div>
      <div class="advice">üí° –°–æ–≤–µ—Ç: –ø–æ–ø—Ä–æ–±—É–π —Å–æ—á–µ—Ç–∞—Ç—å —Å–∞–º—ã—Ö –Ω–µ–æ–±—ã—á–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å –Ω–µ–ø—Ä–∏–≤—ã—á–Ω—ã–º–∏ –ª–æ–∫–∞—Ü–∏—è–º–∏ ‚Äî —á–∞—Å—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ª—É—á—à–µ–µ.</div>
    </section>

    <!-- Task 3 -->
    <section class="task" id="task3">
      <h2>üïµÔ∏è‚Äç‚ôÄÔ∏è –ó–∞–¥–∞–Ω–∏–µ 3 ‚Äî –î–µ—Ç–µ–∫—Ç–∏–≤ –æ—à–∏–±–æ–∫</h2>
      <ol class="steps">
        <li>–ù–∞–∂–º–∏ ¬´–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ–∫—Å—Ç¬ª ‚Äî –ø–æ—è–≤–∏—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–π —Ç–µ–∫—Å—Ç (4‚Äì7 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π) —Å –æ—à–∏–±–∫–∞–º–∏.</li>
        <li>–ü–æ–ø—Ä–æ–±—É–π –Ω–∞–π—Ç–∏ –æ—à–∏–±–∫–∏ —Å–∞–º –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.</li>
        <li>–ù–∞–∂–º–∏ ¬´–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ò–ò¬ª ‚Äî —É–≤–∏–¥–∏—à—å –ø–æ–¥—Å–≤–µ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç.</li>
      </ol>
      <div class="row">
        <button class="btn" onclick="task3_load()">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ–∫—Å—Ç</button>
        <button class="btn" onclick="task3_showNext()">–î—Ä—É–≥–æ–π —Ç–µ–∫—Å—Ç</button>
      </div>
      <label class="label">–¢–µ–∫—Å—Ç —Å –æ—à–∏–±–∫–∞–º–∏</label>
      <textarea id="t3_input" rows="6"></textarea>
      <button class="btn" onclick="task3_check()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ò–ò</button>
      <div id="t3_out" class="output"></div>
      <div class="advice">üí° –°–æ–≤–µ—Ç: —á–∏—Ç–∞–π –≤—Å–ª—É—Ö ‚Äî —á–∞—Å—Ç–æ —Å–ª—ã—à–∏—à—å, –≥–¥–µ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∑–∞–ø—è—Ç–æ–π –∏–ª–∏ —Å–≤—è–∑–∫–∏.</div>
    </section>

    <!-- Task 4 -->
    <section class="task" id="task4">
      <h2>üé§ –ó–∞–¥–∞–Ω–∏–µ 4 ‚Äî –°—Ç–∏—Ö–æ—Ç–≤–æ—Ä–Ω—ã–π –±–∞—Ç—Ç–ª</h2>
      <ol class="steps">
        <li>–í–≤–µ–¥–∏ —Ç–µ–º—É –∏–ª–∏ —Å–≤–æ–π –∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ç–∏—Ö.</li>
        <li>–ù–∞–∂–º–∏ ¬´–°—Ç–∏—Ö –ò–ò¬ª ‚Äî –ø–æ–ª—É—á–∏—à—å 2‚Äì3 —á–µ—Ç–≤–µ—Ä–æ—Å—Ç–∏—à–∏—è (—Ä–∞–Ω–¥–æ–º–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã).</li>
        <li>–°—Ä–∞–≤–Ω–∏—Ç–µ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è.</li>
      </ol>
      <label class="label">–¢–≤–æ—è —Ç–µ–º–∞ / —Å—Ç–∏—Ö</label>
      <textarea id="t4_input" rows="4" placeholder="–¢–µ–º–∞ –∏–ª–∏ —Å—Ç–∏—Ö..."></textarea>
      <div class="row">
        <button class="btn" onclick="task4_generate()">–°—Ç–∏—Ö –ò–ò (1 –≤–∞—Ä–∏–∞–Ω—Ç)</button>
        <button class="btn" onclick="task4_generate(3)">–°—Ç–∏—Ö–∏ –ò–ò (3 –≤–∞—Ä–∏–∞–Ω—Ç–∞)</button>
      </div>
      <div id="t4_out" class="output"></div>
      <div class="advice">üí° –°–æ–≤–µ—Ç: –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —á–∏—Ç–∞—Ç—å —Å—Ç–∏—Ö–∏ –≤—Å–ª—É—Ö ‚Äî –∏–Ω—Ç–æ–Ω–∞—Ü–∏—è –±—ã—Å—Ç—Ä–æ –ø–æ–∫–∞–∂–µ—Ç —Å–∏–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏.</div>
    </section>

    <!-- Task 5 -->
    <section class="task" id="task5">
      <h2>üìñ –ó–∞–¥–∞–Ω–∏–µ 5 ‚Äî –ò–Ω—Ç–µ—Ä–≤—å—é —Å –∫–Ω–∏–∂–Ω—ã–º –≥–µ—Ä–æ–µ–º</h2>
      <ol class="steps">
        <li>–í—ã–±–µ—Ä–∏ –≥–µ—Ä–æ—è –∏–∑ —Å–ø–∏—Å–∫–∞.</li>
        <li>–ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å ‚Äî –ò–ò –æ—Ç–≤–µ—Ç–∏—Ç –æ—Ç –∏–º–µ–Ω–∏ –≥–µ—Ä–æ—è.</li>
        <li>–ü–æ–≤—Ç–æ—Ä—è–π ‚Äî –∫–∞–∂–¥—ã–π —Ä–∞–∑ –≥–µ—Ä–æ–π –º–æ–∂–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–µ–º–Ω–æ–≥–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É.</li>
      </ol>
      <label class="label">–í—ã–±—Ä–∞—Ç—å –≥–µ—Ä–æ—è</label>
      <select id="t5_select">
        <option>–ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä</option>
        <option>–®–µ—Ä–ª–æ–∫ –•–æ–ª–º—Å</option>
        <option>–ê–ª–∏—Å–∞</option>
        <option>–ö–∞—Ä–ª—Å–æ–Ω</option>
        <option>–ü–∏—Ç–µ—Ä –ü—ç–Ω</option>
      </select>
      <label class="label">–¢–≤–æ–π –≤–æ–ø—Ä–æ—Å</label>
      <input type="text" id="t5_question" placeholder="–ù–∞–ø–∏—à–∏ –≤–æ–ø—Ä–æ—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä: '–ö—Ç–æ —Ç—ã?' –∏–ª–∏ '–ì–¥–µ —Ç—ã –∂–∏–≤—ë—à—å?'">
      <div class="row">
        <button class="btn" onclick="task5_ask()">–°–ø—Ä–æ—Å–∏—Ç—å</button>
        <button class="btn" onclick="task5_sample()">–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤</button>
      </div>
      <div id="t5_out" class="output"></div>
      <div class="advice">üí° –°–æ–≤–µ—Ç: –∑–∞–¥–∞–≤–∞–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂—É –≤–æ–ø—Ä–æ—Å—ã –æ –µ–≥–æ –º–æ—Ç–∏–≤–∞—Ü–∏–∏, —Å—Ç—Ä–∞—Ö–∞—Ö –∏ –º–µ—á—Ç–∞—Ö ‚Äî —Ç–∞–∫ –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞–µ—à—å –≥–µ—Ä–æ—è.</div>
    </section>

  </div>

<script>
/* ============================
   Task 1 ‚Äî Super-editor
   ============================ */
function task1_check(){
  const text = document.getElementById('t1_input').value.trim();
  if(!text){ alert('–ù–∞–ø–∏—à–∏ —Ä–∞—Å—Å–∫–∞–∑, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.'); return;}
  const adv = [
    "–î–æ–±–∞–≤—å –¥–µ—Ç–∞–ª–µ–π –æ —á—É–≤—Å—Ç–≤–∞—Ö –≥–µ—Ä–æ—è.",
    "–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑—å —Å–ª–æ–≤–∞ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π —Å–∏–Ω–æ–Ω–∏–º—ã, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–æ–≤.",
    "–ü–æ—Å—Ç—Ä–æ–π —á–µ—Ç–∫–∏–π —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—è–¥–æ–∫, –∏—Å–ø–æ–ª—å–∑—É–π —Å–ª–æ–≤–∞-—Å–≤—è–∑–∫–∏: —Å–Ω–∞—á–∞–ª–∞, –∑–∞—Ç–µ–º, —Å–ø—É—Å—Ç—è.",
    "–î–æ–±–∞–≤—å –¥–∏–∞–ª–æ–≥ ‚Äî —ç—Ç–æ –æ–∂–∏–≤–∏—Ç —Å—Ü–µ–Ω—É.",
    "–£–∫—Ä–µ–ø–∏ —Ñ–∏–Ω–∞–ª: —Å–¥–µ–ª–∞–π –µ–≥–æ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–º –∏–ª–∏ —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–∏–º."
  ];
  // pick 5 shuffled adv (or fewer if less)
  const shuffled = adv.sort(()=>0.5-Math.random());
  let out = "–ò–ò ‚Äî —Å–æ–≤–µ—Ç—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é (–≤–∞—Ä–∏–∞–Ω—Ç—ã):\n\n";
  for(let i=0;i<Math.min(5,shuffled.length);i++){
    out += (i+1)+". "+shuffled[i]+"\n";
  }
  document.getElementById('t1_out').innerText = out;
}

/* ============================
   Task 2 ‚Äî Story master
   ============================ */
const t2_chars_pool = ["—Å–º–µ–ª—ã–π –∫–æ—Ç-–ø–∏—Ä–∞—Ç üê±‚Äç‚ò†Ô∏è","—Ä–æ–±–æ—Ç-–ø–æ–≤–∞—Ä ü§ñ","–¥–µ–≤–æ—á–∫–∞-–≤–æ–ª—à–µ–±–Ω–∏—Ü–∞ ‚ú®","–≥–æ–≤–æ—Ä—è—â–∏–π –¥—Ä–∞–∫–æ–Ω üêâ","–ö–∞—Ä–ª—Å–æ–Ω üç©","—Å—Ç–∞—Ä—ã–π –º—É–¥—Ä—ã–π –≤–æ—Ä–æ–±–µ–π üê¶","—Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –º—É–∑—ã–∫–∞–Ω—Ç üéª"];
const t2_places_pool = ["–ø–æ–¥–≤–æ–¥–Ω—ã–π –≥–æ—Ä–æ–¥ üåä","–∑–∞–º–æ–∫ –≤ –æ–±–ª–∞–∫–∞—Ö ‚òÅÔ∏è","—Ç–∞–π–Ω—ã–π —Å–∞–¥ üå∏","–∫–æ—Å–º–∏—á–µ—Å–∫–∞—è —Å—Ç–∞–Ω—Ü–∏—è üöÄ","—à—É–º–Ω—ã–π –≥–æ—Ä–æ–¥ üèôÔ∏è","–∑–∞–±—Ä–æ—à–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ üìö","–∑–∞—Ç–æ–Ω—É–≤—à–∏–π –∫–æ—Ä–∞–±–ª—å ‚öì"];
function task2_generate(){
  const chars = shuffleArray(t2_chars_pool).slice(0,3);
  const places = shuffleArray(t2_places_pool).slice(0,3);
  document.getElementById('t2_chars').innerText = chars.join("\\n");
  document.getElementById('t2_places').innerText = places.join("\\n");
}
function task2_save(){
  const story = document.getElementById('t2_story').value.trim();
  if(!story){ alert('–ù–∞–ø–∏—à–∏ —Å–≤–æ—é –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º.'); return;}
  document.getElementById('t2_out').innerText = "–¢–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è:\n\n"+story;
}

/* ============================
   Task 3 ‚Äî Detective with many texts
   ============================ */
const task3_texts = [
  {
    wrong: "–ö–æ–≥–¥–∞ —è –ø—Ä–∏—à–æ–ª —É—Ç—Ä–æ–º –≤ —à–∫–æ–ª—É —è –∑–∞–º–µ—Ç–∏–ª —á—Ç–æ –Ω–∞ –∫—Ä—ã—à–µ —Å–∏–¥–µ–ª —Å—Ç—Ä–∞–Ω–Ω—ã–π –≥–æ–ª—É–±—å, –æ–Ω —Å–º–æ—Ç—Ä–µ–ª –Ω–∞ –º–µ–Ω—è –∏ —Å–ª–æ–≤–Ω–æ —Ö–æ—Ç–µ–ª —Å–∫–∞–∑–∞—Ç—å —á—Ç–æ-—Ç–æ.",
    right: "–ö–æ–≥–¥–∞ —è –ø—Ä–∏—à—ë–ª —É—Ç—Ä–æ–º –≤ —à–∫–æ–ª—É, —è –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ –Ω–∞ –∫—Ä—ã—à–µ —Å–∏–¥–µ–ª —Å—Ç—Ä–∞–Ω–Ω—ã–π –≥–æ–ª—É–±—å. –û–Ω —Å–º–æ—Ç—Ä–µ–ª –Ω–∞ –º–µ–Ω—è –∏ —Å–ª–æ–≤–Ω–æ —Ö–æ—Ç–µ–ª —á—Ç–æ-—Ç–æ —Å–∫–∞–∑–∞—Ç—å."
  },
  {
    wrong: "–ú—ã —à–ª–∏ –¥–æ–º–æ–π –∏ –ø–æ –¥–æ—Ä–æ–≥–µ –≤–∏–¥–µ–ª —Å—Ç–∞—Ä—É—é –∂–µ–Ω—â–∏–Ω—É –æ–Ω–∞ –ø—Ä–æ–¥–∞–≤–∞–ª–∞ —è–±–ª–æ–∫–∏ –Ω–æ –Ω–∏–∫—Ç–æ –Ω–µ –ø–æ–∫—É–ø–∞–ª –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –±—ã–ª–∏ –∑–µ–ª—ë–Ω—ã–µ.",
    right: "–ú—ã —à–ª–∏ –¥–æ–º–æ–π –∏ –ø–æ –¥–æ—Ä–æ–≥–µ –≤–∏–¥–µ–ª–∏ —Å—Ç–∞—Ä—É—é –∂–µ–Ω—â–∏–Ω—É. –û–Ω–∞ –ø—Ä–æ–¥–∞–≤–∞–ª–∞ —è–±–ª–æ–∫–∏, –Ω–æ –Ω–∏–∫—Ç–æ –Ω–µ –ø–æ–∫—É–ø–∞–ª –∏—Ö, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –±—ã–ª–∏ –∑–µ–ª—ë–Ω—ã–µ."
  },
  {
    wrong: "–û–Ω –Ω–∞–∫–ª–æ–Ω–∏–ª—Å—è —á—Ç–æ–± –ø–æ–¥–Ω—è—Ç—å –∫–ª—é—á –Ω–æ –≤–¥—Ä—É–≥ —É—Å–ª—ã—à–∞–ª –∫–∞–∫ –∑–∞ —Å–ø–∏–Ω–æ–π —á—Ç–æ-—Ç–æ —à—É—Ä—à–∏—Ç –∏ –æ–Ω –æ–±–µ—Ä–Ω—É–ª—Å—è –Ω–æ –Ω–∏–∫–æ–≥–æ –Ω–µ –±—ã–ª–æ.",
    right: "–û–Ω –Ω–∞–∫–ª–æ–Ω–∏–ª—Å—è, —á—Ç–æ–±—ã –ø–æ–¥–Ω—è—Ç—å –∫–ª—é—á, –Ω–æ –≤–¥—Ä—É–≥ —É—Å–ª—ã—à–∞–ª, –∫–∞–∫ –∑–∞ —Å–ø–∏–Ω–æ–π —á—Ç–æ-—Ç–æ —à—É—Ä—à–∏—Ç. –û–Ω –æ–±–µ—Ä–Ω—É–ª—Å—è, –Ω–æ –Ω–∏–∫–æ–≥–æ –Ω–µ –±—ã–ª–æ."
  },
  {
    wrong: "–ú–∞–º–∞ –≥–æ—Ç–æ–≤–∏–ª–∞ –æ–±–µ–¥ –∏ –ø–æ –ø—É—Ç–∏ —Ç—É–¥–∞ –∑–∞–º–µ—Ç–∏–ª–∞ —á—Ç–æ –ø–ª–∏—Ç–∞ –±—ã–ª–∞ –≤–∫–ª—é—á–µ–Ω–∞, –æ–Ω–∞ –±—ã—Å—Ç—Ä–æ –≤—ã–∫–ª—é—á–∏–ª–∞ –∏ –ø–æ–∑–≤–∞–ª–∞ –º–µ–Ω—è –ø–æ–º–æ—á—å.",
    right: "–ú–∞–º–∞ –≥–æ—Ç–æ–≤–∏–ª–∞ –æ–±–µ–¥ –∏ –ø–æ –ø—É—Ç–∏ —Ç—É–¥–∞ –∑–∞–º–µ—Ç–∏–ª–∞, —á—Ç–æ –ø–ª–∏—Ç–∞ –±—ã–ª–∞ –≤–∫–ª—é—á–µ–Ω–∞. –û–Ω–∞ –±—ã—Å—Ç—Ä–æ –≤—ã–∫–ª—é—á–∏–ª–∞ –µ—ë –∏ –ø–æ–∑–≤–∞–ª–∞ –º–µ–Ω—è –ø–æ–º–æ—á—å."
  },
  {
    wrong: "–£—á–∏—Ç–µ–ª—å —Å–∫–∞–∑–∞–ª –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ç–µ–∫—Å—Ç –≥—Ä–æ–º–∫–æ –Ω–æ —É –º–µ–Ω—è –ø–µ—Ä–µ—Å–æ—Ö–ª–æ –≤ –≥–æ—Ä–ª–µ –∏ —è —Ç–∏—Ö–æ –Ω–∞—á–∞–ª —á–∏—Ç–∞—Ç—å —Å –æ—à–∏–±–∫–∞–º–∏.",
    right: "–£—á–∏—Ç–µ–ª—å —Å–∫–∞–∑–∞–ª –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ç–µ–∫—Å—Ç –≥—Ä–æ–º–∫–æ, –Ω–æ —É –º–µ–Ω—è –ø–µ—Ä–µ—Å–æ—Ö–ª–æ –≤ –≥–æ—Ä–ª–µ, –∏ —è —Ç–∏—Ö–æ –Ω–∞—á–∞–ª —á–∏—Ç–∞—Ç—å —Å –æ—à–∏–±–∫–∞–º–∏."
  },
  {
    wrong: "–ü–æ—Å–ª–µ –ø—Ä–æ–≥—É–ª–∫–∏ –º—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –¥–æ–º, –≥–¥–µ –Ω–∞ —Å—Ç–æ–ª–µ –±—ã–ª —Ç–æ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π –±–∞–±—É—à–∫–∞ –∏—Å–ø–µ–∫–ª–∞ –≤—á–µ—Ä–∞ –æ–Ω –æ–∫–∞–∑–∞–ª—Å—è –æ—á–µ–Ω—å –≤–∫—É—Å–Ω—ã–º.",
    right: "–ü–æ—Å–ª–µ –ø—Ä–æ–≥—É–ª–∫–∏ –º—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –¥–æ–º, –≥–¥–µ –Ω–∞ —Å—Ç–æ–ª–µ –±—ã–ª —Ç–æ—Ä—Ç, –∫–æ—Ç–æ—Ä—ã–π –±–∞–±—É—à–∫–∞ –∏—Å–ø–µ–∫–ª–∞ –≤—á–µ—Ä–∞. –û–Ω –æ–∫–∞–∑–∞–ª—Å—è –æ—á–µ–Ω—å –≤–∫—É—Å–Ω—ã–º."
  },
  {
    wrong: "–Ø —É–≤–∏–¥–µ–ª –∫–∞–∫ –º–∞—à–∏–Ω–∞ –º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–¥—ä–µ—Ö–∞–ª–∞ –∏ –∏–∑ –Ω–µ—ë –≤—ã—à–µ–ª –º—É–∂—á–∏–Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –¥–µ—Ä–∂–∞–ª –≤ —Ä—É–∫–∞—Ö –±–æ–ª—å—à—É—é –∫–æ—Ä–æ–±–∫—É –Ω–∞–ø–æ–ª–Ω–µ–Ω–Ω—É—é –∫–Ω–∏–≥–∞–º–∏.",
    right: "–Ø —É–≤–∏–¥–µ–ª, –∫–∞–∫ –º–∞—à–∏–Ω–∞ –º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–¥—ä–µ—Ö–∞–ª–∞, –∏ –∏–∑ –Ω–µ—ë –≤—ã—à–µ–ª –º—É–∂—á–∏–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–µ—Ä–∂–∞–ª –≤ —Ä—É–∫–∞—Ö –±–æ–ª—å—à—É—é –∫–æ—Ä–æ–±–∫—É, –Ω–∞–ø–æ–ª–Ω–µ–Ω–Ω—É—é –∫–Ω–∏–≥–∞–º–∏."
  },
  {
    wrong: "–û–Ω–∞ –±–µ–≥–∞–ª–∞ –ø–æ –ø–∞—Ä–∫—É —Å–º–µ—è—Å—å –∏ –Ω–µ –∑–∞–º–µ—Ç–∏–ª–∞ —á—Ç–æ –ø–æ—Ç–µ—Ä—è–ª–∞ —à–∞—Ä—Ñ –∑–∞—Ç–µ–º –≤–µ—Ä–Ω—É–ª–∞—Å—å –∏ –Ω–∞—à–ª–∞ –µ–≥–æ –Ω–∞ —Å–∫–∞–º–µ–π–∫–µ.",
    right: "–û–Ω–∞ –±–µ–≥–∞–ª–∞ –ø–æ –ø–∞—Ä–∫—É, —Å–º–µ—è—Å—å, –∏ –Ω–µ –∑–∞–º–µ—Ç–∏–ª–∞, —á—Ç–æ –ø–æ—Ç–µ—Ä—è–ª–∞ —à–∞—Ä—Ñ. –ó–∞—Ç–µ–º –≤–µ—Ä–Ω—É–ª–∞—Å—å –∏ –Ω–∞—à–ª–∞ –µ–≥–æ –Ω–∞ —Å–∫–∞–º–µ–π–∫–µ."
  }
];
let t3_current = null;
function task3_load(){
  t3_current = task3_texts[Math.floor(Math.random()*task3_texts.length)];
  document.getElementById('t3_input').value = t3_current.wrong;
  document.getElementById('t3_out').innerText = "";
}
function task3_showNext(){ task3_load(); }
function task3_check(){
  if(!t3_current){ alert('–°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ–∫—Å—Ç.'); return; }
  const wrong = t3_current.wrong;
  const right = t3_current.right;
  // We'll highlight differences by comparing words and marking those that differ
  const wWords = wrong.split(/(\s+)/); // keep spaces
  const rWords = right.split(/\s+/);
  // Simple approach: highlight substrings that appear in wrong but not in right by exact matching of certain tokens (like missing commas, joined words)
  // We'll try to mark punctuation/word mismatches by finding common substrings
  let highlighted = wrong;
  // For safety, prepare a list of obvious error patterns by comparing right and wrong characters
  // gather sequences of characters from wrong that are not in right segments - simpler: highlight words present in wrong that are not exactly matched in right at same position
  const wSimple = wrong.split(/\s+/);
  const rSimple = right.split(/\s+/);
  let highlights = [];
  for(let i=0;i<Math.max(wSimple.length,rSimple.length);i++){
    if(wSimple[i] && rSimple[i]){
      if(wSimple[i] !== rSimple[i]){
        // mark this wrong word for highlight (only first occurrence)
        highlights.push(wSimple[i]);
      }
    } else if(wSimple[i] && !rSimple[i]){
      highlights.push(wSimple[i]);
    }
  }
  // Replace only first occurrences to avoid over-replacing
  let outHTML = wrong;
  highlights.forEach(h=>{
    // escape for regex
    const esc = h.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    outHTML = outHTML.replace(new RegExp(esc), '<span class="error">'+h+'</span>');
  });
  // remove trivial case where nothing was marked -> try to highlight punctuation differences like missing commas
  if(outHTML === wrong){
    // try to highlight commas missing in wrong
    if(right.includes(',') && !wrong.includes(',')){
      // find a position in right where comma exists and highlight adjacent word in wrong (best effort)
      const idx = right.indexOf(',');
      const prefix = right.slice(0, idx).split(/\s+/).pop();
      if(prefix) outHTML = wrong.replace(new RegExp(prefix), '<span class="error">'+prefix+'</span>');
    }
  }
  const combined = "–¢–µ–∫—Å—Ç —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã—Ö –æ—à–∏–±–æ–∫:\n\n" + outHTML + "\n\n–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:\n\n" + right;
  document.getElementById('t3_out').innerHTML = combined;
}

/* ============================
   Task 4 ‚Äî Poems expanded
   ============================ */
const poemPool = [
  "–í –Ω–µ–±–µ –∑–≤—ë–∑–¥—ã —Å–≤–µ—Ç—è—Ç —è—Ä–∫–æ,\n–ù–æ—á—å –ª–æ–∂–∏—Ç—Å—è –Ω–∞ –¥–æ–º–∞.\n–°–µ—Ä–¥—Ü–µ –±—å—ë—Ç—Å—è —Ç–∞–∫ –æ—Ç–≤–∞–∂–Ω–æ,\n–°–ª–æ–≤–Ω–æ –≤ –º–∏—Ä–µ –Ω–µ—Ç—É –∑–ª–∞.",
  "–û—Å–µ–Ω—å –ª–∏—Å—Ç—å—è –∫—Ä—É–∂–∏—Ç –≤ —Ç–∞–Ω—Ü–µ,\n–ñ—ë–ª—Ç—ã–º –ø–ª–∞—â–æ–º —Å—Ç–µ–ª–µ—Ç –ø—É—Ç—å.\n–ö–∞–∂–¥—ã–π –º–∏–≥ –ø–æ–ª–æ–Ω —Ä–æ–º–∞–Ω—Ç–∏–∫–∏ ‚Äî\n–í–µ—Ç–µ—Ä —à–µ–ø—á–µ—Ç —á—Ç–æ-—Ç–æ –≤—Å–ª—É—Ö.",
  "–í –æ–∫–µ–∞–Ω–µ —à—É–º –ø—Ä–∏–±–æ—è,\n–ü–µ—Å–Ω–∏ —á–∞–µ–∫, –≤–∫—É—Å —Å–æ–ª—ë–Ω—ã–π.\n–Ø –º–µ—á—Ç–∞—é –≤–Ω–æ–≤—å –æ –º–æ—Ä–µ,\n–ì–¥–µ –∑–∞–∫–∞—Ç –≥–æ—Ä–∏—Ç –∞–ª—ã–π.",
  "–ó–∏–º–Ω–∏–π –≤–µ—á–µ—Ä –∑–∞ –æ–∫–Ω–æ–º,\n–°–Ω–µ–≥ –ª–æ–∂–∏—Ç—Å—è –º—è–≥–∫–∏–º –∫–æ–≤—Ä–æ–º.\n–Ø—Ä–∫–æ —Å–≤–µ—Ç—è—Ç —Ñ–æ–Ω–∞—Ä–∏,\n–í —Å–µ—Ä–¥—Ü–µ ‚Äî —Ä–∞–¥–æ—Å—Ç—å –∏ –º–µ—á—Ç—ã.",
  "–í–µ—Å–Ω–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç, —Ç–∞–µ—Ç –ª—ë–¥,\n–ò —Å–æ–ª–Ω—Ü–µ —Ä–∞–¥—É–µ—Ç –Ω–∞—Ä–æ–¥.\n–ü–æ–≤—Å—é–¥—É –∑–∞–ø–∞—Ö–∏ —Ü–≤–µ—Ç–æ–≤,\n–ò –º–∏—Ä –ø–æ–ª–æ–Ω –Ω–æ–≤—ã—Ö —Å–Ω–æ–≤.",
  "–ì—Ä–æ–∑–∞ —Ä–∞—Å–∫–∞—Ç—ã —à–ª—ë—Ç –≤–¥–∞–ª–∏,\n–î–µ—Ä–µ–≤—å—è –≤–µ—Ç—Ä–æ–º –æ–±–Ω—è–ª–∏.\n–ù–æ –ø–æ—Å–ª–µ ‚Äî —Ä–∞–¥—É–≥–∞ –ø—Ä–∏–¥—ë—Ç,\n–ò —Å–Ω–æ–≤–∞ —Å—á–∞—Å—Ç—å–µ –Ω–∞—Å –Ω–∞–π–¥—ë—Ç.",
  "–õ–µ—Ç–Ω–∏–π –∑–Ω–æ–π –∏ –∑–≤–æ–Ω —Ü–∏–∫–∞–¥,\n–í —Ä–µ—á–∫–µ —Å–≤–µ—Ç–ª—ã–π –≤–æ–¥–æ–ø–∞–¥.\n–ü–ª—è—à–µ—Ç —Å–æ–ª–Ω–µ—á–Ω—ã–π —Ä—É—á–µ–π,\n–î–∞—Ä–∏—Ç —Ä–∞–¥–æ—Å—Ç—å –æ–Ω –¥–µ—Ç–µ–π.",
  "–¢–∏—Ö–∏–π –≤–µ—á–µ—Ä, –ª–∞–º–ø–∞, –∫–Ω–∏–≥–∞,\n–°–ª–æ–≤–Ω–æ –º–∏—Ä –∑–æ–≤—ë—Ç –≤ –º–µ—á—Ç—É.\n–ö–∞–∂–¥—ã–π –∞–±–∑–∞—Ü –∫–∞–∫ –∫—Ä–æ—à–∫–∞ —Å–≤–µ—Ç–∞,\n–í–µ–¥—ë—Ç –∑–∞ —Å–æ–±–æ–π –≤ –¥—Ä—É–≥—É—é —Ç—å–º—É."
];
function task4_generate(count=1){
  const target = document.getElementById('t4_out');
  let out = "";
  for(let i=0;i<count;i++){
    const p = poemPool[Math.floor(Math.random()*poemPool.length)];
    out += "–í–∞—Ä–∏–∞–Ω—Ç "+(i+1)+":\n"+p+"\n\n";
  }
  target.innerText = out.trim();
}

/* ============================
   Task 5 ‚Äî Interview with characters
   ============================ */
function task5_sample(){
  const s = "–ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤:\n- –ö—Ç–æ —Ç—ã?\n- –ì–¥–µ —Ç—ã –∂–∏–≤—ë—à—å?\n- –ß–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è?\n- –ò–∑ –∫–∞–∫–æ–π —Ç—ã –∫–Ω–∏–≥–∏?\n- –ö–∞–∫–æ–µ —Ç–≤–æ—ë —Å–∞–º–æ–µ –±–æ–ª—å—à–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ?";
  document.getElementById('t5_out').innerText = s;
}
function task5_ask(){
  const char = document.getElementById('t5_select').value;
  const q = (document.getElementById('t5_question').value || "").trim();
  if(!q){ alert('–ù–∞–ø–∏—à–∏ –≤–æ–ø—Ä–æ—Å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.'); return; }
  const answer = generateCharacterAnswer(char, q);
  document.getElementById('t5_out').innerText = char + " –æ—Ç–≤–µ—á–∞–µ—Ç:\n\n" + answer;
}
function generateCharacterAnswer(character, question){
  // normalize
  const q = question.toLowerCase();
  // keyword-based replies
  if(character === "–ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä"){
    if(q.includes("–∫—Ç–æ —Ç—ã")||q.includes("–∫–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç")) return "–ú–µ–Ω—è –∑–æ–≤—É—Ç –ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä. –Ø —É—á–µ–Ω–∏–∫ –•–æ–≥–≤–∞—Ä—Ç—Å–∞ –∏ —Ä–∞–Ω—å—à–µ —Å—Ä–∞–∂–∞–ª—Å—è —Å —Ç—ë–º–Ω—ã–º –≤–æ–ª—à–µ–±–Ω–∏–∫–æ–º.";
    if(q.includes("–≥–¥–µ")||q.includes("–∂–∏–≤")) return "–Ø –∂–∏–≤—É / —É—á—É—Å—å –≤ –•–æ–≥–≤–∞—Ä—Ç—Å–µ ‚Äî —à–∫–æ–ª–µ –≤–æ–ª—à–µ–±—Å—Ç–≤–∞ –∏ –º–∞–≥–∏–∏.";
    if(q.includes("—á—Ç–æ –¥–µ–ª–∞")||q.includes("—á–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è")) return "–°–µ–π—á–∞—Å —É—á—É—Å—å, —Ç—Ä–µ–Ω–∏—Ä—É—é—Å—å, –ø–æ–º–æ–≥–∞—é –¥—Ä—É–∑—å—è–º –∏ –∏–Ω–æ–≥–¥–∞ —Ä–∞—Å—Å–ª–µ–¥—É—é —Å—Ç—Ä–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è.";
    if(q.includes("–∏–∑ –∫–∞–∫–æ–π")||q.includes("–∫–Ω–∏–≥–∞")) return "–Ø ‚Äî –≥–ª–∞–≤–Ω—ã–π –≥–µ—Ä–æ–π —Å–µ—Ä–∏–∏ –∫–Ω–∏–≥ –æ –ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä–µ, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –î–∂. –ö. –†–æ—É–ª–∏–Ω–≥.";
    // fallback: in-character free answer
    return "–Ø –ø–æ–º–Ω—é, –∫–∞–∫ –≤–∞–∂–Ω–æ –∏–º–µ—Ç—å –¥—Ä—É–∑–µ–π –∏ –±—ã—Ç—å —Å–º–µ–ª—ã–º. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –≤ —Å–∞–º—ã—Ö —Ç—Ä—É–¥–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.";
  }
  if(character === "–®–µ—Ä–ª–æ–∫ –•–æ–ª–º—Å" || character === "–®–µ—Ä–ª–æ–∫ –•–æ–ª–º—Å"){
    if(q.includes("–∫—Ç–æ —Ç—ã")||q.includes("–∫–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç")) return "–ú–æ–µ –∏–º—è ‚Äî –®–µ—Ä–ª–æ–∫ –•–æ–ª–º—Å. –Ø –¥–µ—Ç–µ–∫—Ç–∏–≤, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç —Å–∞–º—ã–µ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–≥–∞–¥–∫–∏.";
    if(q.includes("–≥–¥–µ")||q.includes("–∂–∏–≤")) return "–Ø –ø—Ä–æ–∂–∏–≤–∞—é –Ω–∞ –ë–µ–π–∫–µ—Ä-—Å—Ç—Ä–∏—Ç, 221B ‚Äî —Ç–∞–º —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω –º–æ–π —É–º –∏ –º–µ—Ç–æ–¥—ã.";
    if(q.includes("—á—Ç–æ –¥–µ–ª–∞")||q.includes("—á–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è")) return "–Ø –Ω–∞–±–ª—é–¥–∞—é, –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é —É–ª–∏–∫–∏ –∏ –¥–µ–ª–∞—é –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≤—ã–≤–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∏–º –Ω–µ –≤–∏–¥–Ω—ã.";
    if(q.includes("–∏–∑ –∫–∞–∫–æ–π")||q.includes("–∫–Ω–∏–≥–∞")) return "–Ø ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–∂ –¥–µ—Ç–µ–∫—Ç–∏–≤–Ω—ã—Ö —Ä–∞—Å—Å–∫–∞–∑–æ–≤ –∏ —Ä–æ–º–∞–Ω–æ–≤ –ê—Ä—Ç—É—Ä–∞ –ö–æ–Ω–∞–Ω –î–æ–π–ª—è.";
    return "–õ–æ–≥–∏–∫–∞ –∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ ‚Äî –º–æ–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã. –ö–∞–∂–¥—ã–π —Ñ–∞–∫—Ç –≤–∞–∂–µ–Ω.";
  }
  if(character === "–ê–ª–∏—Å–∞"){
    if(q.includes("–∫—Ç–æ —Ç—ã")||q.includes("–∫–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç")) return "–Ø ‚Äî –ê–ª–∏—Å–∞. –Ø –ø–æ–ø–∞–¥–∞–ª–∞ –≤ –°—Ç—Ä–∞–Ω—É —á—É–¥–µ—Å –∏ –≤–∏–¥–µ–ª–∞ –Ω–µ–æ–±—ã—á–Ω—ã–µ –≤–µ—â–∏.";
    if(q.includes("–≥–¥–µ")||q.includes("–∂–∏–≤")) return "–ß–∞—â–µ –≤—Å–µ–≥–æ –º–µ–Ω—è –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –°—Ç—Ä–∞–Ω–µ —á—É–¥–µ—Å, –Ω–æ –∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –º–∏—Ä–µ —è –ª—é–±–ª—é –≥—É–ª—è—Ç—å –∏ –º–µ—á—Ç–∞—Ç—å.";
    if(q.includes("—á—Ç–æ –¥–µ–ª–∞")||q.includes("—á–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è")) return "–Ø –∏—Å—Å–ª–µ–¥—É—é –º–∏—Ä—ã, –∑–∞–¥–∞—é –≤–æ–ø—Ä–æ—Å—ã –∏ —á–∞—Å—Ç–æ –æ–∫–∞–∑—ã–≤–∞—é—Å—å –≤ –∑–∞–±–∞–≤–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.";
    if(q.includes("–∏–∑ –∫–∞–∫–æ–π")||q.includes("–∫–Ω–∏–≥–∞")) return "–Ø ‚Äî –≥–µ—Ä–æ–∏–Ω—è –∫–Ω–∏–≥–∏ –õ—å—é–∏—Å–∞ –ö—ç—Ä—Ä–æ–ª–ª–∞ '–ê–ª–∏—Å–∞ –≤ –°—Ç—Ä–∞–Ω–µ —á—É–¥–µ—Å'.";
    return "–ò–Ω–æ–≥–¥–∞ –º–∏—Ä –∫–∞–∂–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–Ω—ã–º, –Ω–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º ‚Äî –ø—Ä–æ—Å—Ç–æ —Å–º–æ—Ç—Ä–∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ!";
  }
  if(character === "–ö–∞—Ä–ª—Å–æ–Ω"){
    if(q.includes("–∫—Ç–æ —Ç—ã")||q.includes("–∫–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç")) return "–Ø ‚Äî –ö–∞—Ä–ª—Å–æ–Ω, –∂–∏–≤—É –Ω–∞ –∫—Ä—ã—à–µ. –Ø —Å–∞–º—ã–π –ª—É—á—à–∏–π –≤ –º–∏—Ä–µ –∏ –ª—é–±–ª—é –≤–∞—Ä–µ–Ω—å–µ!";
    if(q.includes("–≥–¥–µ")||q.includes("–∂–∏–≤")) return "–ñ–∏–≤—É –Ω–∞ –∫—Ä—ã—à–µ –æ–¥–Ω–æ–≥–æ –æ–±—ã—á–Ω–æ–≥–æ –¥–æ–º–∞, —Ä—è–¥–æ–º —Å –º–æ–∏–º –¥—Ä—É–≥–æ–º –ú–∞–ª—ã—à–µ–º.";
    if(q.includes("—á—Ç–æ –¥–µ–ª–∞")||q.includes("—á–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è")) return "–õ–µ—Ç–∞—é, –≤–µ—Å–µ–ª—é—Å—å, –ª—é–±–ª—é –≤–∞—Ä–µ–Ω—å–µ –∏ —É—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø—Ä–æ–¥–µ–ª–∫–∏ ‚Äî –Ω–æ –≤—Å–µ–≥–¥–∞ –ø–æ–º–æ–≥–∞—é –¥—Ä—É–∑—å—è–º.";
    if(q.includes("–∏–∑ –∫–∞–∫–æ–π")||q.includes("–∫–Ω–∏–≥–∞")) return "–Ø ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–∂ –∫–Ω–∏–≥ —à–≤–µ–¥—Å–∫–æ–π –ø–∏—Å–∞—Ç–µ–ª—å–Ω–∏—Ü—ã –ê—Å—Ç—Ä–∏–¥ –õ–∏–Ω–¥–≥—Ä–µ–Ω, –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–∞–∫ –ö–∞—Ä–ª—Å–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π –∂–∏–≤—ë—Ç –Ω–∞ –∫—Ä—ã—à–µ.";
    return "–Ø –ª—é–±–ª—é —Å–≤–æ–±–æ–¥—É –∏ –≤–µ—Å–µ–ª—å–µ! –ê –≤–∞—Ä–µ–Ω—å–µ ‚Äî —ç—Ç–æ —Å—á–∞—Å—Ç—å–µ –≤ –±–∞–Ω–∫–µ.";
  }
  if(character === "–ü–∏—Ç–µ—Ä –ü—ç–Ω"){
    if(q.includes("–∫—Ç–æ —Ç—ã")||q.includes("–∫–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç")) return "–Ø ‚Äî –ü–∏—Ç–µ—Ä –ü—ç–Ω, –º–∞–ª—å—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ö–æ—Ç–µ–ª –≤–∑—Ä–æ—Å–ª–µ—Ç—å.";
    if(q.includes("–≥–¥–µ")||q.includes("–∂–∏–≤")) return "–Ø –∂–∏–≤—É –≤ –ù–µ—Ç–ª–∞–Ω–¥–∏–∏ (–ù–µ–≤–µ—Ä–ª–µ–Ω–¥–µ), —Å—Ä–µ–¥–∏ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –º–∞–ª—å—á–∏–∫–æ–≤ –∏ —Ñ–µ–π.";
    if(q.includes("—á—Ç–æ –¥–µ–ª–∞")||q.includes("—á–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è")) return "–õ–µ—Ç–∞—é, —Å—Ä–∞–∂–∞—é—Å—å —Å –∫–∞–ø–∏—Ç–∞–Ω–æ–º –ö—Ä—é–∫–æ–º –∏ –∏—â—É –Ω–æ–≤—ã–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è.";
    if(q.includes("–∏–∑ –∫–∞–∫–æ–π")||q.includes("–∫–Ω–∏–≥–∞")) return "–Ø ‚Äî –≥–µ—Ä–æ–π —Å–∫–∞–∑–æ–∫ –î–∂. –ú. –ë–∞—Ä—Ä–∏ –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ç–µ–∞—Ç—Ä–∞–ª—å–Ω—ã—Ö –∏ –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∞–¥–∞–ø—Ç–∞—Ü–∏–π.";
    return "–°–≤–æ–±–æ–¥–∞ –∏ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è ‚Äî –≤–æ—Ç —á—Ç–æ –∑–æ–≤—ë—Ç –º–µ–Ω—è –≤ –ø—É—Ç—å. –•–æ—á–µ—à—å –ø–æ–ª–µ—Ç–µ—Ç—å —Å–æ –º–Ω–æ–π?";
  }
  // default fallback: attempt to answer using keywords
  if(/–∫—Ç–æ|–∫–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç/.test(q)) return "–Ø ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–∂ –∏–∑ –∫–Ω–∏–≥–∏, –ø—Ä–∏—Ö–æ–¥–∏ –±–ª–∏–∂–µ, –∏ —è —Ä–∞—Å—Å–∫–∞–∂—É –æ —Å–µ–±–µ.";
  if(/–≥–¥–µ|–∂–∏–≤/.test(q)) return "–Ø –∂–∏–≤—É —Ç–∞–º, –≥–¥–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –º–æ–∏ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è ‚Äî –≤ –º–∏—Ä–µ –∫–Ω–∏–≥–∏.";
  if(/—á—Ç–æ|—á–µ–º/.test(q)) return "–Ø –¥–µ–ª–∞—é —Ç–æ, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å—é–∂–µ—Ç—É: –¥—É–º–∞—é, –¥–µ–π—Å—Ç–≤—É—é –∏ —É—á—É—Å—å.";
  if(/–∫—Ç–æ –∞–≤—Ç–æ—Ä|–∏–∑ –∫–∞–∫–æ–π/.test(q)) return "–ú–æ—è –∏—Å—Ç–æ—Ä–∏—è –æ–ø–∏—Å–∞–Ω–∞ –≤ –∏–∑–≤–µ—Å—Ç–Ω–æ–π –∫–Ω–∏–≥–µ ‚Äî –∑–∞–≥–ª—è–Ω–∏ –≤ —Ç–∏—Ç—Ä—ã!";
  return "–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –Ø –±—ã –æ—Ç–≤–µ—Ç–∏–ª(–∞) —Ç–∞–∫: —ç—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤ –≤ —Ä–∞—Å—Å–∫–∞–∑–µ.";
}

/* ============================
   Utilities
   ============================ */
function shuffleArray(a){ return a.map(v=>[v,Math.random()]).sort((x,y)=>x[1]-y[1]).map(x=>x[0]); }

</script>
</body>
</html>
